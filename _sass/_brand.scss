// ==========================================================================
// Theme Custom Layout
// ==========================================================================
//
// # Mixins
// # Scaffolding
// # Components
// # Miscellaneous
// # Customize Theme
//

// Mixins
// ==========================================================================

//
// Set color based background
//
// To dynamically change text color based on a background color
// more detais http://thesassway.com/intermediate/dynamically-change-text-color-based-on-its-background-with-sass
//
@function set-color-based-background($color) {
    @if lightness($color) > 54 {
        @return $gray-base;
    }
    @else {
        @return #ffffff;
    }
}

// https://github.com/twbs/bootstrap-sass/tree/37ea51e9ac2ea1e0f475f998f6df70fabf0996b7/assets/stylesheets/bootstrap/mixins
// https://github.com/twbs/bootstrap-sass/blob/37ea51e9ac2ea1e0f475f998f6df70fabf0996b7/assets/stylesheets/bootstrap/mixins/_vendor-prefixes.scss

@mixin grayscale {
    -moz-filter: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg'><filter id='grayscale'><feColorMatrix type='matrix' values='0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0'/></filter></svg>#grayscale");
    -o-filter: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg'><filter id='grayscale'><feColorMatrix type='matrix' values='0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0'/></filter></svg>#grayscale");
    -webkit-filter: grayscale(100%);
    filter: gray;
    filter: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg'><filter id='grayscale'><feColorMatrix type='matrix' values='0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0'/></filter></svg>#grayscale");
}

@mixin hover-img-zoom {
    img {
        @include transition(all 0.1s linear);
    }
    &:hover img {
        @include scale(1.15);
    }
}

a.thumbnail-opacity {
    border: none;
    @include opacity(0.4);
    @include transition(opacity 0.15s linear);
    &:hover.thumbnail {
        text-decoration: none;
        @include opacity(1);
    }
}

.animation-1s {
    @include animation(1s);
}

//
// Create theme
//
@mixin create-theme($site, $color, $bodyclass: true) {
    //
    // Palete color and background
    //
    .color-#{$site} {
        color: $color !important;
    }
    .bg-#{$site} {
        background: $color !important;
    }
    //
    // Choose if will be for body with class or without
    //
    // @bodyclass true
    // Add name site as class
    //
    $element: body;
    @if $bodyclass {
        $element: "body." + $site;
    }
    #{$element} {
        @include text-emphasis-variant(".text-primary", $color);
        @include bg-variant(".bg-primary", $color);
        //
        // Header
        // =======================
        //
        // Navbar
        //
        #header .navbar {
            border-bottom: 5px solid $color !important;
        }
        //
        // Page Header
        //
        #header .page-header {
            //
            // Background and color
            //
            background: $color;
            @include gradient-directional($color, darken($color, 5%), $deg: 45deg);
            color: set-color-based-background($color);
            a {
                color: set-color-based-background($color);
            }
            //
            // Botao default
            //
            .btn-default,
            a.btn-default,
            button.btn-default {
                @include button-variant(set-color-based-background($color), $color, set-color-based-background($color));
            }
            //
            // Botao Principal
            //
            .btn-primary,
            a.btn-primary,
            button.btn-primary {
                @include button-variant($color, set-color-based-background($color), $color);
            }
        }
        //
        // Content and Sidebar
        // =======================
        //
        #content, #sidebar {
            //
            // Paineis
            //
            .panel.panel-primary {
                border-color: $color;
                .panel-heading {
                    background: $color;
                    color: set-color-based-background($color);
                    border-color: $color;
                }
            }
            //
            // Botao Principal
            //
            .btn-primary,
            a.btn-primary,
            button.btn-primary {
                @include button-variant($color, set-color-based-background($color), $color);
            }
            //
            // Label Principal
            //
            .label-primary {
                background: $color !important;
                color: set-color-based-background($color);
            }
            //
            // List group
            //
            .list-group-item.active {
                background: $color;
                color: set-color-based-background($color);
                border-color: lighten($color, 10%);
            }
            .btn-group-vertical .active {
                border-left: 5px solid $color !important;
                box-shadow: none;
            }
        }
        //
        // Components
        // =======================
        //
        // Carousel Banner
        .carousel-control:hover {
            color: $color !important;
        }
        .carousel-indicators .active {
            background: $color !important;
        }
        //
        // Footer
        // =======================
        //
        /*
        #footer {
            border-top: 5px solid $color !important;
            h4 {
                color: lighten($color, 15%) !important;
            }
            .btn-primary.show-map {
                color: lighten($color, 15%);
                border: 1px solid lighten($color, 15%);
                &:hover {
                    color: #fff;
                    border: 1px solid #fff;
                    background: none;
                }
            }
            .list-unstyled li {
                &:hover {
                    border-left-color: lighten($color, 15%);
                }
            }
        }
        */
    }
}

// Scaffolding
// ==========================================================================
//
// Update the basics of our documents to prep for docs content.
//
html {
    background: #e3e9ea;
}

body {
    max-width: 1400px;
    margin: 0 auto;
    border: none;
}

.container {
    max-width: 960px;
    .navbar {
        @extend .row;
    }
}

//
// navbar-secundary
//
//
.navbar {
    //max-width: 960px;
    margin: 0 auto;
    border-radius: 0;
    border: 0;
    border-bottom: 1px solid #dde4e7;
    a {
        font-size: 12px;
        font-weight: bold;
    }
}

// Components
// ==========================================================================

//
// Modifier class for 21:9 aspect ratio
//
.embed-responsive-21by9 {
    padding-bottom: 42.19%;
}

//
// Modifier class for 1:1 aspect ratio
//
.embed-responsive-1by1 {
    padding-bottom: 100%;
}

// Miscellaneous
// ==========================================================================

//
// Show grids columns
//
.show-grid [class^="col-"] {
    padding-top: 10px;
    padding-bottom: 10px;
    background-color: #eee;
    background-color: rgba(86, 61, 124, 0.15);
    border: 1px solid #ddd;
    border: 1px solid rgba(86, 61, 124, 0.2);
}

//
// Fancy skip link
//
// Make it look a bit less "bare bones"
// Also includes focus suppression for the Chrome tabindex="-1" workaround
//
#skippy {
    display: block;
    padding: 1em;
    background-color: #f5f5f5;
    outline: 0;
}

#skippy .skiplink-text {
    padding: .5em;
    outline: 1px dotted;
}

#content:focus {
    outline: none;
}

//
// Header Site
//
// Show all logos, site, centro paula souza and governo do estado de sao paulo
//
$brand-header-logo-color: $gray-base;
$brand-header-logo-color-hover: lighten($brand-header-logo-color, 10%);

#header {
    .logos {
        @extend .row;
        @extend .hidden-xs;
        height: 140px;
        padding-top: 20px;
        padding-bottom: 20px;
        // Todos os logos
        .logo-site,
        .logo-cps,
        .logo-sp {
            @extend .col-sm-4;
            @extend .col-md-3;
            height: 100px;
            .svg, .img, svg, img {
                @extend .img-responsive;
                width: auto;
                max-height: 100px;
                position: absolute;
                top: 0;
                bottom: 0;
                left: 0;
                right: 0;
                margin: auto;
            }
            .svg, svg {
                path,
                rect,
                polygon {
                    fill: $brand-header-logo-color;
                }
                &:hover {
                    path,
                    rect,
                    polygon {
                        fill: $brand-header-logo-color-hover;
                    }
                }
            }
        }
        div:first-child {
            .svg, .img, svg, img {
                @extend .pull-left;
                margin-left: 15px;
            }
        }
        div:last-child {
            .svg, .img, svg, img {
                @extend .pull-right;
                margin-right: 15px;
            }
        }
        // Logo principal do site
        .logo-site {
            .svg, .img, svg, img {
                max-height: 80px;
            }
        }
        // Logo centro paula souza
        .logo-cps {
            @extend .col-md-6;
            .svg, .img, svg, img {
                max-height: 50px;
            }
        }
        // Logo governo do estado de sao paulo
        .logo-sp {
            .svg, .img, svg, img {
                max-height: 100px;
            }
        }
    }
}

//
// Navbar
//
// Navbar main in #header, with affix effect
//
#header .navbar {
    @extend .navbar;
    @extend .navbar-inverse;
    width: 100%;
    max-width: 1400px;
    .navbar-brand {
        font-size: 16px;
        img, svg {
            height: 30px;
            margin-top: -3px;
        }
    }
    &.affix-top {
        .navbar-brand {
            img, svg {
                @include opacity(0);
                @include transition(all 0.1s linear);
                margin-left: -50px;
            }
        }
    }
    &.affix {
        position: fixed;
        z-index: $zindex-navbar;
        top: 0;
        .navbar-brand {
            img, svg {
                margin-left: 15px;
                @include opacity(1);
                @include transition(all 0.1s linear);
            }
        }
    }
    .dropdown-menu {
        .glyphicon {
            margin-right: 5px;
            font-size: 14px;
        }
    }
}

//
// Page Header in #header
//
#header .page-header {
    @extend .text-center;
    padding: 30px 30px 140px;
    margin-top: 0;
    margin-bottom: -100px;
    color: set-color-based-background(white);
    a:link {
        font-weight: bold;
    }
    a.btn {
        font-weight: normal;
    }
    // Background image, testar
    &:before {
        position: absolute;
        z-index: -1;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
        content: '';
        opacity: 1;
        background-image: none;
        background-repeat: no-repeat;
        background-position: center top;
        background-size: cover;
        opacity: 0.25;
        @include grayscale;
        background-image: none;
    }
}

//
// Wrapper
//
// Contain the content main and sidebar
//
#wrapper {
    background: #fff;
    padding: 0 30px 30px;
}

// Customize Theme
// ==========================================================================
//
// Generate theme for default Centro Paula Souza
//
@include create-theme($cps-name, $cps-color, false);
@include create-theme($fatec-name, $fatec-color, true);
@include create-theme($etec-name, $etec-color, true);

//
// Generate theme for all courses
//
@each $site, $color in ($default-name, $default-color), ($ads-name, $ads-color), ($ge-name, $ge-color), ($gp-name, $gp-color), ($si-name, $si-color), ($log-name, $log-color) {
    @include create-theme($site, $color);
}
